var le=Object.defineProperty,re=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var K=(n,o,e)=>o in n?le(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e,Y=(n,o)=>{for(var e in o||(o={}))ue.call(o,e)&&K(n,e,o[e]);if(G)for(var e of G(o))ce.call(o,e)&&K(n,e,o[e]);return n},q=(n,o)=>re(n,ie(o));import{d as R,r as g,o as C,a as w,c as x,b as H,l as J,s as B,e as Q,w as k,f as de,g as pe,h as F,u as M,i as $,j as P,k as I,m as ge}from"./vendor.b7c1a951.js";const me=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(t){if(t.ep)return;t.ep=!0;const a=e(t);fetch(t.href,a)}};me();var S=(n,o)=>{const e=n.__vccOpts||n;for(const[s,t]of o)e[s]=t;return e};const fe={key:0,class:"loading"},ve={key:2,class:"error"};let W,A;window.MonacoEnvironment={getWorkerUrl:function(n,o){return"/worker-proxy.js"}};const he=()=>W?Promise.resolve(W):A||(J.config({paths:{vs:"//cdn.jsdelivr.net/npm/monaco-editor@0.27.0/min/vs"}}),A=J.init().then(n=>W=n)),_e=R({setup(n){let o=g(!0),e=g();return C(async()=>{o.value=!0,e.value=await he(),o.value=!1}),(s,t)=>o.value?(w(),x("div",fe,"loading monaco library")):e.value?H(s.$slots,"default",{key:1,monaco:e.value},void 0,!0):(w(),x("div",ve,"monaco load failed"))}});var be=S(_e,[["__scopeId","data-v-48eb98a6"]]);const ye="##[group]",we="##[endgroup]",X="",xe="\b",ke={"30":"rgba(0,0,0,1)","31":"rgba(247,49,49,1)","32":"rgba(127,202,84,1)","33":"rgba(246,222,84,1)","34":"rgba(0,0,255,1)","35":"rgba(255,0,255,1)","36":"rgba(0,255,255,1)","37":"rgba(255,255,255,1)","90":"rgba(128,128,128,1)"},$e={"40":"rgba(0,0,0,1)","41":"rgba(247,49,49,1)","42":"rgba(127,202,84,1)","43":"rgba(246,222,84,1)","44":"rgba(0,0,255,1)","45":"rgba(255,0,255,1)","46":"rgba(0,255,255,1)","47":"rgba(255,255,255,1)"},Z={"1":"bold","3":"italic","4":"underline"},Le=n=>{let o=null,e=null,s="",t=[];const a=[];let r={};const c=i=>{(i.message||"").split(`
`).forEach(u=>{a.push(q(Y({},i),{message:u}))})},b=function(){let i,u;s.length?s=s.substr(0,s.length-1):a.length&&(i=a.length-1,u=a[i].message||"",u.length===1?a.pop():a[i].message=u.substr(0,u.length-1))};for(let i=0;i<n.length;i++){if(o!==null){o===X&&n[i]==="["?(s&&(r.message=s,c(r),r={},s=""),o=null,e=""):(s+=o+n[i],o=null);continue}else if(e!==null){n[i]===";"?(t.push(e),e=""):n[i]==="m"?(t.push(e),e=null,s="",t.forEach(function(u){const l=Number(u);ke[l]?r.color=l:$e[l]?r.background=l:l===39?delete r.color:l===49?delete r.background:Z[l]?r[Z[l]]=!0:l===22?r.bold=!1:l===23?r.italic=!1:l===24&&(r.underline=!1)}),t=[]):e+=n[i];continue}n[i]===X?o=n[i]:n[i]===xe?b():s+=n[i]}return s&&(r.message=s+(o||""),c(r)),a};const Ne=R({props:{monaco:null,wrap:{type:Boolean},showLineNumber:{type:Boolean},showTimestamp:{type:Boolean},logs:null,styles:null,stylePrefix:null},setup(n,{expose:o}){const e=n,s=["command","info","general"];let t=B(),a=g();const r=()=>{t.value&&(t.value.dispose(),t.value=null)};let c=Q(()=>e.stylePrefix||"monaco-logger"),b=g(0),i=g(0),u=B([]),l=g(""),y=B([]);const L=()=>{let m=0;const f=[];let p;const v=[],O=[];e.logs.length&&(i.value=e.logs[0].timestamp.length,e.logs.forEach((h,U)=>{if(m=Math.max(h.lineNo,m),h.message.startsWith(we)&&typeof p=="number"){v.push(h.message),f.push([p,U+1]),p=void 0;return}if(h.message.startsWith(ye)){v.push(h.message),p=U+1;return}let E=h.lineNo;if(s.find(d=>{const _=`[${d}]`;if(h.message.startsWith(_))return O.push({range:new e.monaco.Range(E,1,E,h.message.length+1),options:{inlineClassName:`${c.value}-style-${d}`}}),!0})){v.push(h.message);return}const V=Le(h.message);let T=0;V.forEach(d=>{const _=[];d.italic&&_.push(`${c.value}-style-italic`),d.bold&&_.push(`${c.value}-style-bold`),d.underline&&_.push(`${c.value}-style-underline`),d.color&&_.push(`${c.value}-color-${d.color}`),d.background&&_.push(`${c.value}-color-${d.background}`);const z=T+d.message.length;_.length&&O.push({range:new e.monaco.Range(E,T+1,E,z+1),options:{inlineClassName:_.join(" ")}}),T=z}),v.push(V.map(d=>d.message).join(""))})),b.value=String(m).length,l.value=v.join(`
`),u.value=f,y.value=O,t.value&&(ee(),j(),te(),ne())},ee=()=>{t.value&&t.value.setValue(l.value)};let N=null;const te=()=>{N&&(N.dispose(),N=null),N=e.monaco.languages.registerFoldingRangeProvider("plaintext",{provideFoldingRanges:()=>u.value.map(([m,f])=>({start:m,end:f,kind:e.monaco.languages.FoldingRangeKind.Region}))})},oe=1,j=()=>{if(!t.value)return;if(!e.showLineNumber&&!e.showTimestamp){t.value.updateOptions({lineNumbers:"off"});return}let m=p=>String(p),f=5;e.showTimestamp&&e.showLineNumber?(f=oe+b.value+i.value,m=p=>{const v=e.logs[p-1];return`
        <div class="monaco-logger-margin">
          <span class="lineno">${v.lineNo}</span>
          <span class="timestamp">${v.timestamp}</div>
        </div>
      `}):e.showTimestamp?(f=i.value,m=p=>`
        <div class="monaco-logger-margin">
          <span class="timestamp">${e.logs[p-1].timestamp}</div>
        </div>
      `):(f=b.value,m=p=>`
        <div class="monaco-logger-margin">
          <span class="lineno">${e.logs[p-1].lineNo}</span>
        </div>
      `),t.value.updateOptions({lineNumbersMinChars:f,lineNumbers:m})},ne=()=>{!t.value||t.value.deltaDecorations([],y.value)},se=()=>{!t.value||t.value.updateOptions({wordWrap:e.wrap?"on":"off"})},ae=()=>{r(),t.value=e.monaco.editor.create(a.value,{glyphMargin:!0,value:"",language:"plaintext",theme:"vs-dark",fontSize:14,fixedOverflowWidgets:!0,scrollBeyondLastLine:!1,smoothScrolling:!0,minimap:{enabled:!1},readOnly:!0,padding:{top:5,bottom:15}}),L()};return o({editor:t}),k(()=>e.logs,L),k(()=>e.wrap,se,{immediate:!0}),k(()=>`${e.showTimestamp}-${e.showLineNumber}`,j),C(ae),(m,f)=>(w(),x("div",{ref_key:"container",ref:a,class:"container"},null,512))}});var Ee=S(Ne,[["__scopeId","data-v-04242a15"]]);function Re(n){const o=de({width:0,height:0}),e=new ResizeObserver(()=>{if(n.value){const{width:s,height:t}=n.value.getBoundingClientRect();o.width=s,o.height=t}});return k(n,s=>{if(e.disconnect(),s){const{width:t,height:a}=s.getBoundingClientRect();o.width=t,o.height=a,e.observe(s)}},{immediate:!0}),pe(()=>{e&&e.disconnect()}),o}const Pe=["for"],Se=["id","checked"];let Oe=0;const Te=()=>`${Math.random().toString(16).slice(2)}-${Oe++}`,Ce=R({props:{value:{type:Boolean}},emits:["update:value"],setup(n,{emit:o}){const e=n,s=Te(),t=Q({get:()=>e.value,set:a=>o("update:value",a)});return(a,r)=>(w(),x("label",{for:M(s)},[F("input",{type:"checkbox",id:M(s),checked:t.value,onChange:r[0]||(r[0]=c=>t.value=c.target.checked)},null,40,Se),H(a.$slots,"default",{},void 0,!0)],8,Pe))}});var D=S(Ce,[["__scopeId","data-v-50579fb5"]]);const Be={class:"page"},Fe={class:"left"},Me=I("wrap line"),Ie=I("show timestamp"),We=I("show line number"),Ae=R({setup(n){const o={info:{color:"red",background:"blue",textDecoration:"underline"},warn:{},error:{color:"red"},command:{}};let e=g(),s=g(),t=g([]),a=g(!0),r=g(!0),c=g(!0);const b=Re(e);return k(b,()=>{s.value&&(console.log("wull resize"),s.value.editor.layout())}),C(()=>{fetch("/monaco-logger/github-log.txt").then(async i=>{const u=await i.text();let l;t.value=u.split(`
`).map((y,L)=>(l=l||y.indexOf(" "),{lineNo:L+1,timestamp:y.slice(0,l),message:y.slice(l+1)}))})}),(i,u)=>(w(),x("div",Be,[F("div",Fe,[$(D,{value:a.value,"onUpdate:value":u[0]||(u[0]=l=>a.value=l)},{default:P(()=>[Me]),_:1},8,["value"]),$(D,{value:r.value,"onUpdate:value":u[1]||(u[1]=l=>r.value=l)},{default:P(()=>[Ie]),_:1},8,["value"]),$(D,{value:c.value,"onUpdate:value":u[2]||(u[2]=l=>c.value=l)},{default:P(()=>[We]),_:1},8,["value"])]),F("div",{class:"right",ref_key:"containerRef",ref:e},[$(be,null,{default:P(({monaco:l})=>[$(Ee,{ref_key:"loggerRef",ref:s,logs:t.value,monaco:l,wrap:a.value,"show-timestamp":r.value,"show-line-number":c.value,styles:M(o)},null,8,["logs","monaco","wrap","show-timestamp","show-line-number","styles"])]),_:1})],512)]))}});var De=S(Ae,[["__scopeId","data-v-064d8591"]]);ge(De).mount("#app");
